### Dados Gerais sobre Cancelamento de Assinatura - Hotmart

Ao receber um evento de cancelamento de assinatura, estes são os dados enviados pela Hotmart no formato **JSON**. Eles permitem identificar o assinante, informações do produto, datas relevantes e detalhes do plano.

#### Parâmetros e Detalhes

| Parâmetro                                    | Descrição                                                                                                                                                                                                                                           |
|----------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **hottok** (string)                         | Token único de cada conta Hotmart, enviado no cabeçalho HTTP como `X-HOTMART-HOTTOK` em todas as requisições. Deve ser validado para garantir a autenticidade e evitar fraudes. Se precisar trocar, contate o suporte Hotmart.                         |
| **id** (string)                             | Código único de identificação do evento recebido.                                                                                                                                                            |
| **creation_date** (long)                     | Data de criação do evento, em milissegundos desde 1970-01-01 00:00:00 UTC.                                                                                                                                   |
| **event** (integer)                         | Nome do evento recebido: neste caso, sempre `SUBSCRIPTION_CANCELLATION`.                                                                                                                                    |
| **version** (integer)                       | Versão do evento recebido: sempre `2.0.0`.                                                                                                                                                                  |
| **data** (object)                           | Objeto que contém todos os dados relativos ao evento de cancelamento.                                                                                                                                       |
| data.**actual_recurrence_value** (double)   | Valor pago pelo comprador na última recorrência processada.                                                                                                                                                |
| data.**cancellation_date** (long)           | Data do cancelamento da assinatura, em milissegundos desde 1970-01-01 00:00:00 UTC.                                                                                                                        |
| data.**date_next_charge** (long)            | Data de tentativa do próximo pagamento, caso haja reativação. Também em milissegundos desde 1970-01-01 00:00:00 UTC. Importante para determinar até quando o acesso pode ser concedido.                     |
| data.**product** (object)                   | Dados do produto de assinatura cancelado.                                                                                                                                                                   |
| data.product.**name** (string)              | Nome do produto de assinatura cancelado.                                                                                                                                                                    |
| data.product.**id** (integer)               | Código único do produto de assinatura que foi cancelado.                                                                                                                                                    |
| data.**subscriber** (object)                | Dados do assinante da assinatura.                                                                                                                                                                           |
| data.subscriber.**code** (string)           | Código exclusivo do assinante dessa assinatura. Um mesmo comprador terá códigos diferentes se assinar produtos diferentes.                                                                                  |
| data.subscriber.**name** (string)           | Nome completo do assinante.                                                                                                                                                                                 |
| data.subscriber.**email** (string)          | E-mail do assinante.                                                                                                                                                                                        |
| data.**subscription** (object)              | Dados da assinatura em si.                                                                                                                                                                                  |
| data.subscription.**id** (integer)          | Código único da assinatura na Hotmart.                                                                                                                                                                      |
| data.subscription.**plan** (object)         | Dados do plano de assinatura.                                                                                                                                                                               |
| data.subscription.plan.**name** (string)    | Nome do plano de assinatura.                                                                                                                                                                                |
| data.subscription.plan.**id** (integer)     | Código único do plano de assinatura.                                                                                                                                                                        |

#### Exemplo de Payload de Cancelamento

```json
{
  "id": "0d7aa966-b887-4617-8c56-9e865bfc8ce4",
  "creation_date": 1632411406874,
  "event": "SUBSCRIPTION_CANCELLATION",
  "version": "2.0.0",
  "data": {
    "date_next_charge": 1580667200000,
    "product": {
      "name": "Product Name",
      "id": 3526906
    },
    "actual_recurrence_value": 50.10,
    "subscriber": {
      "code": "QO4THU04",
      "name": "Subscriber Name",
      "email": "subscriber@email.com"
    },
    "subscription": {
      "id": 471681,
      "plan": {
        "name": "Plan Name",
        "id": 460805
      }
    },
    "cancellation_date": 1633410850832
  }
}
```

#### Observações Importantes
- **Valide sempre o token (`hottok`) recebido no cabeçalho HTTP** para garantir segurança.
- Não omita ou resuma nenhum dos campos ao tratar os dados no seu sistema.
- Todas as datas importantes (criação, cancelamento, próxima cobrança) estão em milissegundos desde a época Unix (1970-01-01 00:00:00 UTC).
- Utilize o campo `date_next_charge` para gerir a expiração do acesso do assinante, caso o acesso seja concedido até o fim do ciclo vigente.

Todos os dados apresentados acima são enviados exatamente conforme especificado na documentação oficial para webhooks de cancelamento de assinaturas pela Hotmart.